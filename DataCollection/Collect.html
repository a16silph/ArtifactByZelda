<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  $(document).ready(function(){
  	// Run page loading test x times.
    //RunPerformanceTest("JPEG", 10);
  });

  async function RunPerformanceTest(pageType, loops){
    var fetchStart = "fetch-start";
    var fetchDone = "fetch-done";
    var fetchDuration = "fetch-duration";
    for (var i = 0; i < loops; i++) {
      var start = performance.mark(fetchStart);
      await fetch(`http://artifactbyzelda.se/Artifact${pageType}.html`);
      var end = performance.mark(fetchDone);
      var measure = performance.measure(fetchDuration, fetchStart, fetchDone);
      console.log(`Fetch ${i} duration: ${measure.duration / 1000}s`);
    }
  }

</script>

</head>

<body>
  <ul>
    <button onclick="RunPerformanceTest('JPEG', 50);">JPEG 50</button>
    <button onclick="RunPerformanceTest('PNG', 50);">PNG 50</button>
    <button onclick="RunPerformanceTest('WEBP', 50);">WebP 50</button>
    <button onclick="RunPerformanceTest('AVIF', 50);">AVIF 50</button>
  </ul>

  <div id="collectedData">

  </div>
</body>
